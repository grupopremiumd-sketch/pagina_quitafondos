function init() {
        scene = new THREE.Scene();
        const container = document.getElementById('canvas-container');
        
        camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 10000);
        camera.position.set(0, 0, 10); // Cámara un poco más atrás

        renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true, preserveDrawingBuffer: true });
        renderer.setSize(container.clientWidth, container.clientHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        container.appendChild(renderer.domElement);

        controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;

        // Iluminación envolvente (clave para que no se vea negro)
        scene.add(new THREE.AmbientLight(0xffffff, 1.5));
        const light1 = new THREE.DirectionalLight(0xffffff, 1);
        light1.position.set(5, 10, 7);
        scene.add(light1);
        
        const light2 = new THREE.DirectionalLight(0xffffff, 0.8);
        light2.position.set(-5, 5, -5);
        scene.add(light2);

        const loader = new THREE.GLTFLoader();
        // Carga el archivo desde la raíz
        loader.load('tshirt.glb', (gltf) => {
            shirtModel = gltf.scene;
            
            // Centrado y escalado automático
            const box = new THREE.Box3().setFromObject(shirtModel);
            const size = box.getSize(new THREE.Vector3());
            const center = box.getCenter(new THREE.Vector3());
            
            const maxDim = Math.max(size.x, size.y, size.z);
            const scale = 5 / maxDim; 
            shirtModel.scale.set(scale, scale, scale);
            shirtModel.position.sub(center.multiplyScalar(scale));
            
            scene.add(shirtModel);
            console.log("Camiseta cargada con éxito");
        }, undefined, (err) => {
            console.error("Error: Asegúrate de que tshirt.glb esté en la misma carpeta que este HTML");
        });

        animate();
    }

    function updateMaterial() {
        if (!shirtModel) return;
        const color = document.getElementById('shirt-color').value;
        const scale = 1 / parseFloat(document.getElementById('logo-scale').value);
        const posY = parseFloat(document.getElementById('logo-y').value);

        shirtModel.traverse((child) => {
            if (child.isMesh) {
                child.material.color.set(color);
                if (designTexture) {
                    child.material.map = designTexture;
                    // Ajustes para que el logo no se repita y se vea centrado
                    designTexture.wrapS = designTexture.wrapT = THREE.ClampToEdgeWrapping;
                    child.material.map.repeat.set(scale, scale);
                    // El offset 0.5 es el centro, restamos la escala para ajustar
                    child.material.map.offset.set(0.5 - (0.5 * scale), posY);
                }
                child.material.needsUpdate = true;
            }
        });
    }
